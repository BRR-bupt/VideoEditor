<template>
  <div class="root">
    <WindowNameTag name="Project" />
    <div style="padding: 4px">
      <label class="spectrum-FieldLabel spectrum-FieldLabel--sizeM">name</label>
      <sp-textfield class="w100" :value="name" @change="changeName" />

      <div class="spectrum-FieldLabel spectrum-FieldLabel--sizeM">duration</div>
      <sp-textfield class="w100" type="number" :value="duration" @change="changeDuration" />

      <div class="spectrum-FieldLabel spectrum-FieldLabel--sizeM">fps</div>
      <Select class="w100" :value="fps" :items="fpsItems" @change="changeFps" />

      <div class="spectrum-FieldLabel spectrum-FieldLabel--sizeM">resolution</div>
      <div style="display: flex">
        <div>
          <div class="spectrum-FieldLabel spectrum-FieldLabel--sizeM">width</div>
          <sp-textfield class="w100" type="number" :value="width" @change="changeWidth" />
        </div>
        <div>
          <div class="spectrum-FieldLabel spectrum-FieldLabel--sizeM">height</div>
          <sp-textfield class="w100" type="number" :value="height" @change="changeHeight" />
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.root {
  border: 1px solid var(--black);
}
.label {
  font-size: 16px;
}
.hr {
  height: 1px;
  margin: 4px 0;
}
.w100 {
  width: 100%;
}
</style>

<script lang="ts">
import Vue from 'vue'
import { Component, Prop } from 'vue-property-decorator'
import WindowNameTag from '../components/widget/WindowNameTag.vue'
import { Strip } from '../models'
import Select, { OptionKeyValue } from '../components/widget/Select.vue'

@Component({
  components: {
    WindowNameTag,
    Select
  }
})
export default class ProjectWindow extends Vue {
  @Prop({ default: 0 })
  duration!: number

  @Prop({ default: () => [] })
  strips!: Strip[]

  @Prop({ default: 60 })
  fps!: number

  @Prop({})
  canvas!: HTMLCanvasElement

  @Prop({ default: 0 })
  currentTime!: number

  @Prop({ default: 1920 })
  width!: number

  @Prop({ default: 1080 })
  height!: number

  @Prop({ default: 'untitled' })
  name!: string

  fpsItems: OptionKeyValue[] = [60, 30, 12, 4, 2, 1].map(num => {
    return { text: num.toString(), value: num }
  })

  changeDuration(duration: number) {
    this.$emit('changeDuration', duration)
  }

  changeWidth(width: number) {
    this.$emit('changeWidth', width)
  }

  changeHeight(height: number) {
    this.$emit('changeHeight', height)
  }

  changeFps(fpsItem: OptionKeyValue) {
    this.$emit('changeFps', fpsItem.value)
  }

  changeName(name: string) {
    this.$emit('changeName', name)
  }
}
</script>
